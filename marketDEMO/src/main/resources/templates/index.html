<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>INDEX</title>
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/sidebar.css">
    <link rel="stylesheet" href="/css/product.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/bxslider/4.2.12/jquery.bxslider.css">

    <style>
        .main-banner img { width:100%; height:350px; object-fit:cover; display:block; }
        .grid-products {
            display:grid; grid-template-columns:repeat(4,1fr);
            gap:20px; list-style:none; padding:0; margin-bottom:30px;
        }
        .product {
            border:1px solid #ddd; border-radius:6px; background:#fff; padding:12px;
            text-align:center; transition:transform 0.2s;
        }
        .product:hover { transform:translateY(-4px); box-shadow:0 2px 8px rgba(0,0,0,0.1); }
        .product img { width:100%; height:160px; object-fit:cover; margin-bottom:8px; }
        .name { font-size:14px; font-weight:600; margin-bottom:4px; }
        .origin { font-size:13px; text-decoration:line-through; color:#777; margin-right:4px; }
        .discount { font-size:13px; color:#d32f2f; font-weight:bold; }
        .sale { font-size:15px; font-weight:bold; color:#222; margin-top:4px; }
        .badge.shipping {
            display:inline-block; font-size:12px; padding:2px 6px; background:#1976d2;
            color:#fff; border-radius:4px; margin-top:6px;
        }
    </style>
</head>
<body>

<!-- ✅ 공통 헤더 -->
<th:block th:replace="~{inc/_header :: _header}"/>

<main class="product-page">
    <div class="main-container">

        <!-- ✅ 사이드바 -->
        <div class="sidebar-container">
            <th:block th:replace="~{inc/_sidebar :: _sidebar}"/>

            <!-- 베스트 상품 -->
            <aside class="best-product-list">
                <h3 class="page-title">베스트 상품</h3>
                <ul class="products">
                    <li class="best-product-item" th:each="p : ${bestProducts}">
                        <img th:src="${p.imageBase64}" alt="베스트 상품">
                        <div class="info">
                            <h4 class="name" th:text="${p.pName}">상품명</h4>
                            <p class="price">
                                <span class="origin" th:text="${#numbers.formatInteger(p.pPrice, 3, 'COMMA')} + '원'">30,000원</span>
                                <span class="discount" th:text="${p.pDiscount + '% ↓'}">10%</span>
                                <span class="sale"
                                      th:text="${#numbers.formatInteger(p.pPrice * (100 - p.pDiscount) / 100, 3, 'COMMA')} + '원'">
                                    27,000원
                                </span>
                            </p>
                        </div>
                    </li>
                </ul>
            </aside>
        </div>

        <!-- ✅ 오른쪽 메인 -->
        <section class="product-list">

            <!-- 🔹 메인 배너 -->
            <div class="main-banner">
                <ul class="bxslider">
                    <li th:each="b : ${slideBanners}">
                        <a th:href="${b.aLink}">
                            <img th:src="${b.aImageBase64}" alt="배너">
                        </a>
                    </li>
                </ul>
            </div>

            <!-- 🔹 히트상품 -->
            <h2 class="page-title">히트상품</h2>
            <ul class="grid-products">
                <li class="product" th:each="p : ${hitProducts}">
                    <img th:src="${p.imageBase64}" alt="상품 이미지">
                    <div class="name" th:text="${p.pName}">상품명</div>
                    <div>
                        <span class="origin" th:text="${#numbers.formatInteger(p.pPrice, 3, 'COMMA')} + '원'"></span>
                        <span class="discount" th:text="${p.pDiscount + '% ↓'}"></span>
                    </div>
                    <div class="sale"
                         th:text="${#numbers.formatInteger(p.pPrice * (100 - p.pDiscount) / 100, 3, 'COMMA')} + '원'">
                    </div>
                    <span class="badge shipping">무료배송</span>
                </li>
            </ul>

            <!-- 🔹 추천상품 -->
            <h2 class="page-title">추천상품</h2>
            <ul class="grid-products">
                <li class="product" th:each="p : ${recommendProducts}">
                    <img th:src="${p.imageBase64}" alt="상품 이미지">
                    <div class="name" th:text="${p.pName}"></div>
                    <div>
                        <span class="origin" th:text="${#numbers.formatInteger(p.pPrice,3,'COMMA')} + '원'"></span>
                        <span class="discount" th:text="${p.pDiscount + '% ↓'}"></span>
                    </div>
                    <div class="sale"
                         th:text="${#numbers.formatInteger(p.pPrice * (100 - p.pDiscount)/100,3,'COMMA')} + '원'"></div>
                    <span class="badge shipping">무료배송</span>
                </li>
            </ul>

            <!-- 🔹 최신상품 -->
            <h2 class="page-title">최신상품</h2>
            <ul class="grid-products">
                <li class="product" th:each="p : ${latestProducts}">
                    <img th:src="${p.imageBase64}" alt="상품 이미지">
                    <div class="name" th:text="${p.pName}"></div>
                    <div>
                        <span class="origin" th:text="${#numbers.formatInteger(p.pPrice,3,'COMMA')} + '원'"></span>
                        <span class="discount" th:text="${p.pDiscount + '% ↓'}"></span>
                    </div>
                    <div class="sale"
                         th:text="${#numbers.formatInteger(p.pPrice * (100 - p.pDiscount)/100,3,'COMMA')} + '원'"></div>
                    <span class="badge shipping">무료배송</span>
                </li>
            </ul>

            <!-- 🔹 할인상품 -->
            <h2 class="page-title">할인상품</h2>
            <ul class="grid-products">
                <li class="product" th:each="p : ${discountProducts}">
                    <img th:src="${p.imageBase64}" alt="상품 이미지">
                    <div class="name" th:text="${p.pName}"></div>
                    <div>
                        <span class="origin" th:text="${#numbers.formatInteger(p.pPrice,3,'COMMA')} + '원'"></span>
                        <span class="discount" th:text="${p.pDiscount + '% ↓'}"></span>
                    </div>
                    <div class="sale"
                         th:text="${#numbers.formatInteger(p.pPrice * (100 - p.pDiscount)/100,3,'COMMA')} + '원'"></div>
                    <span class="badge shipping">무료배송</span>
                </li>
            </ul>

        </section>
    </div>
</main>

<!-- ✅ 공통 푸터 -->
<footer class="footer">
    <div class="footer-links">
        <a href="#">회사소개</a> |
        <a href="#">서비스이용약관</a> |
        <a href="#">개인정보처리방침</a> |
        <a href="#">전자금융거래약관</a>
    </div>

    <div class="footer-content" th:each="v : ${companyInfo}">
        <div class="company-info">
            <p th:text="${v.vCompany}">회사명</p>
            <p th:text="${v.vAddr}">주소</p>
            <p th:text="${v.vEmail}">이메일</p>
            <p th:text="${v.vTel}">연락처</p>
        </div>
        <div class="customer-center">
            <p><strong>고객센터</strong></p>
            <p>Tel : 1234-5678 (평일 09:00~18:00)</p>
            <p>전자금융거래 분쟁 담당 : 1234-1234 (365일 09:00~18:00)</p>
        </div>
    </div>
</footer>

<!-- JS -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/bxslider/4.2.12/jquery.bxslider.min.js"></script>
<script>
    $(document).ready(function(){
        $('.bxslider').bxSlider({
            auto:true, mode:'horizontal', speed:500, pause:4000,
            pager:true, controls:true, adaptiveHeight:true
        });
    });
</script>
</body>
</html>
