<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>메인 페이지_2조</title>
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/sidebar.css">
    <link rel="stylesheet" href="/css/product.css">
    <style>
        .grid-products {
            display:grid; grid-template-columns:repeat(4,1fr);
            gap:20px; list-style:none; padding:0; margin-bottom:30px;
        }
        .product {
            border:1px solid #ddd; border-radius:6px; background:#fff; padding:12px;
            text-align:center; transition:transform 0.2s;
        }
        .product:hover { transform:translateY(-4px); box-shadow:0 2px 8px rgba(0,0,0,0.1); }
        .product img { width:100%; height:160px; object-fit:cover; margin-bottom:8px; }
        .name { font-size:14px; font-weight:600; margin-bottom:4px; }
        .origin { font-size:13px; text-decoration:line-through; color:#777; margin-right:4px; }
        .discount { font-size:13px; color:#d32f2f; font-weight:bold; }
        .sale { font-size:15px; font-weight:bold; color:#222; margin-top:4px; }
        .badge.shipping {
            display:inline-block; font-size:12px; padding:2px 6px; background:#1976d2;
            color:#fff; border-radius:4px; margin-top:6px;
        }
        h2.page-title a { text-decoration:none; color:inherit; }
        .product a { display:block; text-decoration:none; color:inherit; }
    </style>


</head>
<body>

<!-- ✅ 공통 헤더 -->
<th:block th:replace="~{inc/_header :: _header}"/>

<main class="product-page">
    <div class="main-container">

        <!--  사이드바 -->
        <div class="sidebar-container">
            <th:block th:replace="~{inc/_sidebar :: _sidebar}"/>
            <aside class="best-product-list">
                <h3 class="page-title">베스트 상품</h3>
                <ul class="products">
                    <li class="best-product-item" th:each="product : ${bestProducts}" th:if="${product != null}">
                        <img th:if="${product.imageBase64 != null}"
                             th:src="${product.imageBase64}"
                             th:alt="${product.pName}">
                        <img th:unless="${product.imageBase64 != null}"
                             src="/images/logo.png"
                             th:alt="${product.pName}">
                        <div class="info">
                            <h4 class="name" th:text="${product.pName}">상품명</h4>
                            <p class="price">
                                <span class="origin" th:text="${#numbers.formatInteger(product.pPrice, 0, 'COMMA')} + '원'">원가</span>
                                <span class="discount" th:if="${product.pDiscount > 0}"
                                      th:text="${product.pDiscount} + '% ↓'">할인율</span>
                                <span class="sale" th:text="${#numbers.formatInteger(product.pPrice * (100 - product.pDiscount) / 100, 0, 'COMMA')} + '원'">할인가</span>
                            </p>
                        </div>
                    </li>
                </ul>
            </aside>
        </div>

        <!--  메인 상품 영역 -->
        <section class="product-list">

            <!--  히트상품 -->
            <h2 class="page-title">
                <a href="/product/list?type=hit">히트상품</a>
            </h2>
            <ul class="grid-products">
                <li class="product" th:each="product : ${hitProducts}" th:if="${product != null}">
                    <a th:href="@{/product/view(pPid=${product.pPid})}">
                        <img th:if="${product.imageBase64 != null}"
                             th:src="${product.imageBase64}"
                             th:alt="${product.pName}">
                        <img th:unless="${product.imageBase64 != null}"
                             src="/images/logo.png"
                             th:alt="${product.pName}">
                        <div class="name" th:text="${product.pName}">상품명</div>
                        <div>
                            <span class="origin" th:text="${#numbers.formatInteger(product.pPrice, 0, 'COMMA')} + '원'">원가</span>
                            <span class="discount" th:if="${product.pDiscount > 0}"
                                  th:text="${product.pDiscount} + '% ↓'">할인율</span>
                        </div>
                        <div class="sale" th:text="${#numbers.formatInteger(product.pPrice * (100 - product.pDiscount) / 100, 0, 'COMMA')} + '원'">할인가</div>
                        <span class="badge shipping">무료배송</span>
                    </a>
                </li>
            </ul>

            <!-- 2. 추천상품 -->
            <h2 class="page-title">
                <a href="/product/list?type=recommend">추천상품</a>
            <!--  최신상품 -->
            <h2 class="page-title">
                <a href="/product/list?type=latest">최신상품</a>
            </h2>
            <ul class="grid-products">
                <li class="product" th:each="product : ${recommendProducts}" th:if="${product != null}">
                    <a th:href="@{/product/view(pPid=${product.pPid})}">
                        <img th:if="${product.imageBase64 != null}"
                             th:src="${product.imageBase64}"
                             th:alt="${product.pName}">
                        <img th:unless="${product.imageBase64 != null}"
                             src="/images/logo.png"
                             th:alt="${product.pName}">
                        <div class="name" th:text="${product.pName}">상품명</div>
                        <div>
                            <span class="origin" th:text="${#numbers.formatInteger(product.pPrice, 0, 'COMMA')} + '원'">원가</span>
                            <span class="discount" th:if="${product.pDiscount > 0}"
                                  th:text="${product.pDiscount} + '% ↓'">할인율</span>
                        </div>
                        <div class="sale" th:text="${#numbers.formatInteger(product.pPrice * (100 - product.pDiscount) / 100, 0, 'COMMA')} + '원'">할인가</div>
                        <span class="badge shipping">무료배송</span>
                    </a>
                </li>
            </ul>

            <!--  최신상품 -->
            <h2 class="page-title">
                <a href="/product/list?type=latest">최신상품</a>
            </h2>
            <ul class="grid-products">
                <li class="product" th:each="product : ${latestProducts}" th:if="${product != null}">
                    <a th:href="@{/product/view(pPid=${product.pPid})}">
                        <img th:if="${product.imageBase64 != null}"
                             th:src="${product.imageBase64}"
                             th:alt="${product.pName}">
                        <img th:unless="${product.imageBase64 != null}"
                             src="/images/logo.png"
                             th:alt="${product.pName}">
                        <div class="name" th:text="${product.pName}">상품명</div>
                        <div>
                            <span class="origin" th:text="${#numbers.formatInteger(product.pPrice, 0, 'COMMA')} + '원'">원가</span>
                            <span class="discount" th:if="${product.pDiscount > 0}"
                                  th:text="${product.pDiscount} + '% ↓'">할인율</span>
                        </div>
                        <div class="sale" th:text="${#numbers.formatInteger(product.pPrice * (100 - product.pDiscount) / 100, 0, 'COMMA')} + '원'">할인가</div>
                        <span class="badge shipping">무료배송</span>
                    </a>
                </li>
            </ul>

            <!-- 4. 인기상품 -->
            <h2 class="page-title">
                <a href="/product/list?type=popular">인기상품</a>
            </h2>
            <ul class="grid-products">
                <li class="product" th:each="product : ${popularProducts}" th:if="${product != null}">
                    <a th:href="@{/product/view(pPid=${product.pPid})}">
                        <img th:if="${product.imageBase64 != null}"
                             th:src="${product.imageBase64}"
                             th:alt="${product.pName}">
                        <img th:unless="${product.imageBase64 != null}"
                             src="/images/logo.png"
                             th:alt="${product.pName}">
                        <div class="name" th:text="${product.pName}">상품명</div>
                        <div>
                            <span class="origin" th:text="${#numbers.formatInteger(product.pPrice, 0, 'COMMA')} + '원'">원가</span>
                            <span class="discount" th:if="${product.pDiscount > 0}"
                                  th:text="${product.pDiscount} + '% ↓'">할인율</span>
                        </div>
                        <div class="sale" th:text="${#numbers.formatInteger(product.pPrice * (100 - product.pDiscount) / 100, 0, 'COMMA')} + '원'">할인가</div>
                        <span class="badge shipping">무료배송</span>
                    </a>
                </li>
            </ul>

            <!-- 5. 할인상품 -->
            <h2 class="page-title">
                <a href="/product/list?type=discount">할인상품</a>
            </h2>
            <ul class="grid-products">
                <li class="product" th:each="product : ${discountProducts}" th:if="${product != null}">
                    <a th:href="@{/product/view(pPid=${product.pPid})}">
                        <img th:if="${product.imageBase64 != null}"
                             th:src="${product.imageBase64}"
                             th:alt="${product.pName}">
                        <img th:unless="${product.imageBase64 != null}"
                             src="/images/logo.png"
                             th:alt="${product.pName}">
                        <div class="name" th:text="${product.pName}">상품명</div>
                        <div>
                            <span class="origin" th:text="${#numbers.formatInteger(product.pPrice, 0, 'COMMA')} + '원'">원가</span>
                            <span class="discount" th:if="${product.pDiscount > 0}"
                                  th:text="${product.pDiscount} + '% ↓'">할인율</span>
                        </div>
                        <div class="sale" th:text="${#numbers.formatInteger(product.pPrice * (100 - product.pDiscount) / 100, 0, 'COMMA')} + '원'">할인가</div>
                        <span class="badge shipping">무료배송</span>
                    </a>
                </li>
            </ul>
        </section>
    </div>
</main>

<th:block th:replace="~{inc/_footer :: _footer}"/>
</body>
</html>


<!-- 전용준 2025-10-18 asd -->